{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">

    <!-- Facility Filter -->
    <div class="mb-4">
        <form method="get" class="d-flex">
            <label for="facility" class="me-2">Select Facility:</label>
            <select name="facility" id="facility" class="form-select w-auto" onchange="this.form.submit()">
                <option value="">All Facilities</option>
                {% for facility in facilities %}
                    <option value="{{ facility.id }}"
                        {% if facility.id|stringformat:"s" == selected_facility %}
                        selected
                        {% endif %}
                    >
                        {{ facility.name }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </div>

    <!-- Dashboard Cards -->
    <div class="row g-3">

        <!-- Daily Expected -->
        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-body">
                    <h5 class="card-title">Daily Expected</h5>
                    <h3 class="card-text">{{ daily_expected.count }}</h3>
                </div>
            </div>
        </div>

        <!-- Daily Refills -->
        <div class="col-md-3">
            <div class="card text-white bg-success mb-3">
                <div class="card-body">
                    <h5 class="card-title">Daily Refills</h5>
                    <h3 class="card-text">{{ daily_refills.count }}</h3>
                </div>
            </div>
        </div>

        <!-- Missed Refills -->
        <div class="col-md-3">
            <div class="card text-white bg-danger mb-3">
                <div class="card-body">
                    <h5 class="card-title">Missed Refills</h5>
                    <h3 class="card-text">{{ missed_refills }}</h3>
                </div>
            </div>
        </div>

        <!-- Weekly Expected -->
        <div class="col-md-3">
            <div class="card text-white bg-info mb-3">
                <div class="card-body">
                    <h5 class="card-title">Weekly Expected</h5>
                    <h3 class="card-text">{{ weekly_expected.count }}</h3>
                </div>
            </div>
        </div>

        <!-- Monthly Expected -->
        <div class="col-md-3">
            <div class="card text-white bg-warning mb-3">
                <div class="card-body">
                    <h5 class="card-title">Monthly Expected</h5>
                    <h3 class="card-text">{{ monthly_expected.count }}</h3>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock content %}
